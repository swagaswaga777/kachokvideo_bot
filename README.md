# ğŸ¤– Ultimate Video Downloader Bot

ĞŸÑ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Telegram Ğ±Ğ¾Ñ‚ Ğ´Ğ»Ñ ÑĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ Ğ²Ğ¸Ğ´ĞµĞ¾ Ñ 10+ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼ Ğ±ĞµĞ· Ğ²Ğ¾Ğ´ÑĞ½Ñ‹Ñ… Ğ·Ğ½Ğ°ĞºĞ¾Ğ².

## âœ¨ Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸

- **ğŸ¥ ĞœÑƒĞ»ÑŒÑ‚Ğ¸-Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ**: YouTube, TikTok (Ğ±ĞµĞ· WM), Instagram, Pinterest, VK Ğ¸ Ğ´Ñ€.
- **ğŸ“ Ğ¤Ğ°Ğ¹Ğ»Ñ‹ Ğ´Ğ¾ 2GB**: ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Local Bot API Server
- **âš¡ Ğ’Ñ‹ÑĞ¾ĞºĞ°Ñ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ**: ĞÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ½Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°
- **ğŸ“‰ Ğ­ĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ²**: Ğ ĞµĞ¶Ğ¸Ğ¼ `LOW_MEMORY_MODE` Ğ´Ğ»Ñ 512MB RAM
- **ğŸ’ Premium ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°**: ĞŸĞ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸, Telegram Stars
- **ğŸ‘‘ ĞĞ´Ğ¼Ğ¸Ğ½-Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ**: Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸ Ğ¸ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ¾Ğ¹

---

## ğŸš€ Deployment Ğ½Ğ° Koyeb

### 1. Fork Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ Ğ½Ğ° GitHub

### 2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ Ğ² Koyeb
- ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡Ğ¸Ñ‚Ğµ GitHub Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹
- Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ Ğ²ĞµÑ‚ĞºÑƒ `main`

### 3. Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ (Secrets):

| ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|------------|----------|
| `BOT_TOKEN` | Ğ¢Ğ¾ĞºĞµĞ½ Ğ¾Ñ‚ @BotFather |
| `ADMIN_IDS` | ID Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ¾Ğ² |
| `TELEGRAM_API_ID` | ĞÑ‚ https://my.telegram.org (Ğ´Ğ»Ñ 2GB Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²) |
| `TELEGRAM_API_HASH` | ĞÑ‚ https://my.telegram.org |

### 4. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ ÑĞµÑ€Ğ²Ğ¸ÑĞ°:
- **Instance**: nano (512MB) Ğ¸Ğ»Ğ¸ small (1GB)
- **Region**: fra (Frankfurt)
- **Port**: 8000 (Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸)

### 5. Deploy!

---

## ğŸ³ Docker Compose (Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾)

```bash
# 1. ĞšĞ»Ğ¾Ğ½Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ
git clone https://github.com/YOUR_USERNAME/bot.git
cd bot

# 2. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹Ñ‚Ğµ .env
cp .env.example .env
nano .env  # Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ BOT_TOKEN

# 3. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚Ğµ
docker-compose up -d --build
```

---

## âš™ï¸ ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ (.env)

```env
# ĞĞ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾
BOT_TOKEN=your_bot_token
ADMIN_IDS=123456789

# Redis
REDIS_URL=redis://localhost:6379/0

# Local Bot API (Ğ´Ğ»Ñ Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² > 50MB)
USE_LOCAL_BOT_API=false
TELEGRAM_API_ID=your_id
TELEGRAM_API_HASH=your_hash

# ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
LOW_MEMORY_MODE=true
MAX_VIDEO_SIZE_MB=45
```

---

## ğŸ›  Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸

- **Python 3.11** + **aiogram 3.x**
- **yt-dlp** (Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¼ĞµĞ´Ğ¸Ğ°)
- **aiohttp** (health check ÑĞµÑ€Ğ²ĞµÑ€)
- **SQLAlchemy** + **Redis**
- **FFmpeg** (Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ²Ğ¸Ğ´ĞµĞ¾)
- **Local Bot API** (Ğ´Ğ¾ 2GB Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²)

---

## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
bot/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.py           # Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ° + health server
â”‚   â”œâ”€â”€ config.py         # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ
â”‚   â”œâ”€â”€ handlers/         # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞ¸ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´
â”‚   â”œâ”€â”€ services/         # Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°
â”‚   â””â”€â”€ middlewares/      # Middleware
â”œâ”€â”€ docker-compose.yml    # Docker Ñ Bot API
â”œâ”€â”€ Dockerfile            # ĞĞ±Ñ€Ğ°Ğ· Ğ±Ğ¾Ñ‚Ğ°
â”œâ”€â”€ Dockerfile.bot-api    # ĞĞ±Ñ€Ğ°Ğ· Local Bot API
â”œâ”€â”€ koyeb.yaml           # Koyeb ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³
â”œâ”€â”€ requirements.txt
â””â”€â”€ .env.example
```

---

## ğŸ”’ Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

- âœ… Whitelist Ğ´Ğ¾Ğ¼ĞµĞ½Ğ¾Ğ²
- âœ… SSRF Protection
- âœ… Rate Limiting
- âœ… Role Based Access

---

## ğŸ“ License

MIT
